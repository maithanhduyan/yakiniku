<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥">
    <title>„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥ | ÁÑºËÇâ„ÉÖ„Ç¢„É≥</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="icons/icon.svg">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <span class="logo">üçñ</span>
                <h1>ÁÑºËÇâ„ÉÖ„Ç¢„É≥</h1>
            </div>
            <div class="header-center">
                <span class="mode-label" id="modeLabel">QR„Çπ„Ç≠„É£„É≥</span>
            </div>
            <div class="header-right">
                <span class="time" id="currentTime">--:--</span>
                <span class="status-dot" id="statusDot"></span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- QR Scan Mode (Default) -->
            <section id="scanMode" class="mode-panel active">
                <div class="scan-container">
                    <div class="scan-frame">
                        <video id="qrVideo" autoplay playsinline></video>
                        <div class="scan-overlay">
                            <div class="scan-box"></div>
                        </div>
                    </div>
                    <p class="scan-instruction">
                        ‰∫àÁ¥ÑQR„Ç≥„Éº„Éâ„Çí„Çπ„Ç≠„É£„É≥„Åó„Å¶„Åè„Å†„Åï„ÅÑ
                    </p>

                    <!-- Manual input fallback -->
                    <div class="manual-input">
                        <button class="btn-secondary" onclick="showManualInput()">
                            ÊâãÂãïÂÖ•Âäõ
                        </button>
                    </div>
                </div>
            </section>

            <!-- Result Display -->
            <section id="resultMode" class="mode-panel">
                <div class="result-container" id="resultContainer">
                    <!-- Dynamic content -->
                </div>
            </section>

            <!-- Dashboard Mode -->
            <section id="dashboardMode" class="mode-panel">
                <div class="dashboard-grid">
                    <!-- Upcoming Bookings -->
                    <div class="panel bookings-panel">
                        <h2>üìã Êú¨Êó•„ÅÆ‰∫àÁ¥Ñ</h2>
                        <div class="booking-list" id="bookingList">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <!-- Waiting List -->
                    <div class="panel waiting-panel">
                        <h2>‚è≥ È†ÜÁï™ÂæÖ„Å°</h2>
                        <div class="waiting-list" id="waitingList">
                            <!-- Dynamic content -->
                        </div>
                        <button class="btn-primary btn-walkin" onclick="showWalkInForm()">
                            + È†ÜÁï™ÂæÖ„Å°ÁôªÈå≤
                        </button>
                    </div>

                    <!-- Available Tables -->
                    <div class="panel tables-panel">
                        <h2>ü™ë Á©∫Â∏≠Áä∂Ê≥Å</h2>
                        <div class="table-grid" id="tableGrid">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <!-- Stats -->
                    <div class="panel stats-panel">
                        <div class="stat-item">
                            <span class="stat-value" id="statCheckedIn">0</span>
                            <span class="stat-label">„ÉÅ„Çß„ÉÉ„ÇØ„Ç§„É≥Ê∏à</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="statWaiting">0</span>
                            <span class="stat-label">È†ÜÁï™ÂæÖ„Å°</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="statAvailable">0</span>
                            <span class="stat-label">Á©∫Â∏≠„ÉÜ„Éº„Éñ„É´</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Bottom Navigation -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-mode="scan" onclick="switchMode('scan')">
                <span class="nav-icon">üì∑</span>
                <span class="nav-label">„Çπ„Ç≠„É£„É≥</span>
            </button>
            <button class="nav-btn" data-mode="dashboard" onclick="switchMode('dashboard')">
                <span class="nav-icon">üìä</span>
                <span class="nav-label">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</span>
            </button>
            <button class="nav-btn" data-mode="waiting" onclick="showWalkInForm()">
                <span class="nav-icon">‚úèÔ∏è</span>
                <span class="nav-label">È†ÜÁï™ÁôªÈå≤</span>
            </button>
        </nav>

        <!-- Modals -->
        <!-- Walk-in Registration Modal -->
        <div id="walkInModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>È†ÜÁï™ÂæÖ„Å°ÁôªÈå≤</h2>
                    <button class="modal-close" onclick="closeModal('walkInModal')">&times;</button>
                </div>
                <form id="walkInForm" onsubmit="submitWalkIn(event)">
                    <div class="form-group">
                        <label>„ÅäÂêçÂâç <span class="required">*</span></label>
                        <input type="text" id="walkInName" required placeholder="Â±±Áî∞">
                    </div>
                    <div class="form-group">
                        <label>‰∫∫Êï∞ <span class="required">*</span></label>
                        <div class="guest-selector">
                            <button type="button" onclick="adjustGuests(-1)">‚àí</button>
                            <span id="guestCount">2</span>
                            <span>ÂêçÊßò</span>
                            <button type="button" onclick="adjustGuests(1)">+</button>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>ÈõªË©±Áï™Âè∑</label>
                        <input type="tel" id="walkInPhone" placeholder="090-1234-5678">
                    </div>
                    <div class="form-group">
                        <label>ÂÇôËÄÉ</label>
                        <input type="text" id="walkInNote" placeholder="Â≠ê‰æõÊ§ÖÂ≠ê„ÅåÂøÖË¶Å„Å™„Å©">
                    </div>
                    <button type="submit" class="btn-primary btn-full">ÁôªÈå≤„Åô„Çã</button>
                </form>
            </div>
        </div>

        <!-- Manual QR Input Modal -->
        <div id="manualInputModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>‰∫àÁ¥Ñ„Ç≥„Éº„ÉâÂÖ•Âäõ</h2>
                    <button class="modal-close" onclick="closeModal('manualInputModal')">&times;</button>
                </div>
                <form onsubmit="submitManualCode(event)">
                    <div class="form-group">
                        <label>‰∫àÁ¥Ñ„Ç≥„Éº„Éâ</label>
                        <input type="text" id="manualCode" placeholder="ABC12345"
                               style="text-transform: uppercase; font-size: 24px; text-align: center;">
                    </div>
                    <button type="submit" class="btn-primary btn-full">Á¢∫Ë™ç</button>
                </form>
            </div>
        </div>

        <!-- Table Assignment Modal -->
        <div id="assignTableModal" class="modal">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>„ÉÜ„Éº„Éñ„É´ÈÅ∏Êäû</h2>
                    <button class="modal-close" onclick="closeModal('assignTableModal')">&times;</button>
                </div>
                <div class="assign-info" id="assignInfo">
                    <!-- Customer info -->
                </div>
                <div class="table-selection" id="tableSelection">
                    <!-- Available tables -->
                </div>
            </div>
        </div>
    </div>

    <script src="js/qr-scanner.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
